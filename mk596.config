// Versions of individual modules
params.illumVersion     = '1.0.1'
params.ashlarVersion    = '1.13.0'
params.coreoVersion     = '2.2.2'
params.unmicstVersion   = '2.6.10'
params.cypositoryVersion= '1.0.11'
params.mcilastikVersion = '1.4.2'
params.s3segVersion     = '1.2.5'
params.quantVersion     = '1.3.2'
params.nstatesVersion   = '1.6.2'

docker.enabled = false
singularity.enabled    = true
singularity.autoMounts = true
singularity.runOptions = '-C'

singularity.cacheDir = '/n/scratch3/users/m/mk596/saberfish-mcmicro/singularity'

env.JAVA_TOOL_OPTIONS = "-Xmx60G"

process {
  executor = 'slurm'
  queue = 'short'
  withName:illumination {
    time = '6h'
    memory = '64G'
    container = "docker://labsyspharm/basic-illumination:${params.illumVersion}"
  }
  withName:ashlar {
    time = '6h'
    memory = '64G'
    container = "docker://labsyspharm/ashlar:${params.ashlarVersion}"
  }
  withName:coreograph {
    time = '1h'
    memory = '64G'
    container = "docker://labsyspharm/unetcoreograph:${params.coreoVersion}"
  }
  withName:unmicst {
    time = '12h'
    memory = '128G'
    container = "docker://labsyspharm/unmicst:${params.unmicstVersion}"
  }
  withName:cypository {
    container = "docker://labsyspharm/cypository:${params.cypositoryVersion}"
  }
  withName:ilastik {
    cpus = 8
    time = '12h'
    memory = '128G'
    container = "docker://labsyspharm/mcmicro-ilastik:${params.mcilastikVersion}"
  }
  withName:s3seg {
    cpus = 6
    time = '6h'
    memory = '80G'
    container = "docker://labsyspharm/s3segmenter:${params.s3segVersion}"
  }
  withName:quantification {
    time = '12h'
    memory = '128G'
    container = "docker://labsyspharm/quantification:${params.quantVersion}"
  }
  withName:naivestates {
    time = '12h'
    memory = '128G'
    container = "docker://labsyspharm/naivestates:${params.nstatesVersion}"
  }
}